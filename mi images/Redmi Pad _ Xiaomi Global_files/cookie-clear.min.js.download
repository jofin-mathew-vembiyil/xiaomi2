!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cookiePolicy=t():e.cookiePolicy=t()}(self,(function(){return(()=>{"use strict";var e={493:function(e,t){var o=this&&this.__read||function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var r,i,n=o.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=n.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.scmCookieLevelConfig=t.scmCookiePolicyConfig=t.scmCookieDomain=t.scmOneTrackConfig=t.scmStatDomainId=void 0;var r={in:[108,121,124,124],id:[109,126,128,128],de:[710,711,592,592],nl:[579,580,591,591],es:[138,139,605,605],fr:[571,572,573,573],it:[524,525,589,589],uk:[577,578,590,590],ru:[132,575,587,587],hk:[103,129,604,604],tw:[104,120,127,127],default:[0,0,0,0]},i={default:{APP_ID:"2882303761517399893",PRO_ID:"16"}},n={fr:"hight",nl:"hight",es:"hight",de:"hight",it:"hight",uk:"hight",tr:"hight",pl:"hight",se:"hight",global:"hight",gr:"hight"};t.scmStatDomainId=function(e){var t=o(r[e]||r.default,4);return{pc:t[0],m:t[1],app:t[2],ios:t[3]}},t.scmOneTrackConfig=function(e){return i[e]||i.default},t.scmCookiePolicyConfig=function(e){return n[e]||""},t.scmCookieLevelConfig=function(e){return"hight"!==n[e]?"0,1,2,3:":"0:"},t.scmCookieDomain=function(e){return"id"===e?".mi.co.id":".mi.com"}},692:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getGoSiteUrl=t.getLocalString=t.isSessionStorageSupport=t.isLocalStorageSupport=t.getMatchCookie=t.getDeleteCookiesType=t.judgePreInCur=void 0;var o=function(e){if(!e.trim())return e;var t=e.match(/[0-9]+/g)||[];return(null==t?void 0:t.join(","))||""};t.judgePreInCur=function(e,t){return e=o(e),(t=o(t)).includes(e)},t.getDeleteCookiesType=function(e,t){e=o(e),t=o(t);var r=e.split(","),i=t.split(",");return r.filter((function(e){return!i.includes(e)}))},t.getMatchCookie=function(e){var t=document.cookie;if(t)return t.split(";").map((function(t){return!!t.split("=")[0].trim().includes(e)&&t.split("=")[0].trim()})).filter((function(e){return!!e}))},t.isLocalStorageSupport=function(){var e="temp";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}},t.isSessionStorageSupport=function(){var e="temp";try{return sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch(e){return!1}},t.getLocalString=function(){var e=!!document&&document.querySelector("html");return!!e&&e.getAttribute("data-ot-local")||(window.location.pathname||"/").split("/")[1]||""},t.getGoSiteUrl=function(e){var t=window.location.host,o=t.includes("test")||t.includes("dev")?{default:"//go-buy.test.mi.com/"+e}:{fr:"//ams-go.buy.mi.com/"+e,es:"//ams-go.buy.mi.com/"+e,de:"//ams-go.buy.mi.com/"+e,nl:"//ams-go.buy.mi.com/"+e,uk:"//ams-go.buy.mi.com/"+e,it:"//ams-go.buy.mi.com/"+e,pl:"//ams-go.buy.mi.com/"+e,default:"//go.buy.mi.com/"+e};return o[e]||o.default}},430:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.cookies=void 0,t.cookies=function(e,t,o){if(arguments.length>1&&"[object Object]"!==String(t)){if(o=Object.assign({},o),null==t&&(o.expires=-1),"number"==typeof o.expires){var r=o.expires,i=o.expires=new Date;i.setDate(i.getDate()+r)}return t=String(t),document.cookie=[encodeURIComponent(e),"=",o.raw?t:encodeURIComponent(t),o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("")}var n,a=(o=t||{}).raw?function(e){return e}:decodeURIComponent;return(n=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?a(o.raw?n[1]:n[1].replace(/\+/g,"%20")):null}},31:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteCookies=void 0;var r=o(430),i=o(692);t.deleteCookies=function(e){var t=i.getLocalString(),o=e.trim();e.includes("xxx")?(i.getMatchCookie(e.replace("xxx",""))||[]).forEach((function(e){r.cookies(e,null,{path:"/"+t,domain:".mi.com"}),r.cookies(e,null,{path:"/",domain:".mi.com"})})):(r.cookies(o,null,{path:"/"+t,domain:".mi.com"}),r.cookies(o,null,{path:"/",domain:".mi.com"}))}},117:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteSessionStorage=t.deleteLocalStorage=void 0;var r=o(692);t.deleteLocalStorage=function(e){var t=r.getLocalString(),o=e.split("__");if(r.isLocalStorageSupport())if(2===o.length&&o[0]===t){var i=JSON.parse(localStorage.getItem(t)||"{}");delete i[o[1]],Object.keys(i).length?localStorage.setItem(t,JSON.stringify(i)):localStorage.removeItem(t)}else localStorage.removeItem(e)},t.deleteSessionStorage=function(e){var t=r.getLocalString(),o=e.split("__");if(r.isSessionStorageSupport())if(2===o.length&&o[0]===t){var i=JSON.parse(sessionStorage.getItem(t)||"{}");delete i[o[1]],Object.keys(i).length?sessionStorage.setItem(t,JSON.stringify(i)):sessionStorage.removeItem(t)}else sessionStorage.removeItem(e)}},338:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDataFromService=void 0,t.getDataFromService=function(e){var t=e.url,o=e.type,r=e.success,i=window;i.getAjax=function(){var e=function(){var e=null;try{e=new XMLHttpRequest}catch(t){try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){e=new ActiveXObject("Microsoft.XMLHTTP")}}return e}();e.onreadystatechange=function(){if(4===e.readyState&&200===e.status){var t=JSON.parse(e.responseText),o={errNo:(null==t?void 0:t.error)||0,data:(null==t?void 0:t.data)||{}};return r&&r(o)}},e.open(o,t,!0),e.withCredentials=!0,e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("")},i.getAjax()}},509:function(e,t,o){var r=this&&this.__read||function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var r,i,n=o.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=n.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var o=0,r=t.length,i=e.length;o<r;o++,i++)e[i]=t[o];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.dealCookiesAndStorage=void 0;var n=o(493),a=o(692),c=o(430),u=o(338),l=o(31),s=o(117),d=o(3),m=function(e,t){var o=["required","functional","advertising","analytical"],n=a.getLocalString(),c=[];e.forEach((function(e){var n,a;(null===(n=t[o[e]])||void 0===n?void 0:n.keys.length)&&c.push.apply(c,i([],r(null===(a=t[o[e]])||void 0===a?void 0:a.keys)))})),c.forEach((function(e){var t=e.name.replace("local",n);switch(e.type){case 0:l.deleteCookies(t);break;case 1:s.deleteLocalStorage(t);break;case 2:s.deleteSessionStorage(t)}}))};t.dealCookiesAndStorage=function(){var e="1"===c.cookies("ISAPP")||"1"===c.cookies("ISIOS"),t=a.getLocalString(),o=c.cookies("policy_notice_pre")||"0,1,2,3:",r=c.cookies("notice_gdpr_prefs")||n.scmCookieLevelConfig(t),i=a.getDeleteCookiesType(o,r),l=a.getDeleteCookiesType("0,1,2,3:",r);c.cookies("notice_gdpr_prefs_copy",r,{path:"/"+t,domain:".mi.com",expires:395}),a.judgePreInCur(o,r)&&c.cookies("policy_notice_pre",r,{path:"/"+t,domain:".mi.com",expires:395}),d.setXmuuid(),d.listenXmuuidChange(),u.getDataFromService({url:a.getGoSiteUrl(t)+"/base/cookie-config?location="+encodeURIComponent(window.location.href),type:"GET",success:function(t){var o;e||t.errNo||(i.length&&m(i,t.data),(null===(o=null==t?void 0:t.data)||void 0===o?void 0:o.auto_clear)&&l.length&&m(l,t.data))}}),c.cookies("policy_notice_pre",r,{path:"/"+t,domain:".mi.com",expires:395})},t.dealCookiesAndStorage()},3:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listenXmuuidChange=t.setXmuuid=void 0;var r=o(430),i=o(692);function n(){return r.cookies("xmuuid")}function a(){var e;return null===(e=localStorage.getItem("xmuuid"))||void 0===e?void 0:e.split("_")[0]}function c(e){r.cookies("xmuuid",e,{expires:90,path:"/",domain:".mi.com"})}function u(e,t){localStorage.setItem("xmuuid",e+"_"+t)}t.setXmuuid=function(){var e=n(),t=a(),o=i.getLocalString().toUpperCase(),r=function(){var e=localStorage.getItem("xmuuid");if(!e)return"";var t=e.split("_");return 2===t.length?t[1]:""}();if(e){if(!t)return u(e,o);if(r!==o)return u(e,o);if(e!==t)return c(t)}else{if(t&&r===o)return c(t);var l=("XMGUEST",("XMGUEST-"+"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(function(e){return((t=parseInt(e))^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16);var t}))).toUpperCase());u(l,o),c(l)}},t.listenXmuuidChange=function(){var e=0,t=a(),o=window.setInterval((function(){n()!==t&&c(t),++e>33&&window.clearInterval(o)}),300)}}},t={},o=function o(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,o),n.exports}(509);return o.default})()}));